# 도메인 모델과 바운디드 컨텍스트

## 9.1 도메인 모델과 경계

처음 도메인 모델을 만들 때 빠지기 쉬운 함정이 도메인을 완벽하게 표현하는 단일 모델을 만드는 시도를 하는 것이다.
한 개의 모델로 여러 하위 도메인을 모두 표현하려고 시도하면 오히려 모든 하위 도메인에 맞지 않는 모델을 만들게 된다.

예를 들어 상품이라는 모델은 카탈로그에서 상품, 재고 관리에서 상품, 주문에서 상품, 배송에서 상품 등 이름만 같지 실제로 의미하는 것은 다르다.

이렇게 하위 도메인마다 같은 용어라도 의미가 다르고 같은 대상이라도 지칭하는 용어가 다를수 있기 때문에 한 개의 모델로 모든 하위 도메인을 표현하려는 시도는 올바른 방법이 아니며 표현할 수도 없다.

## 9.2 바운디드 컨텍스트

`바운디드 컨텍스트`는 모델의 경계를 결정하며 한 개의 바운디드 컨텍스트는 논리적으로 한 개의 모델을 갖는다. 바운디드 컨텍스트는 용어를 기준으로 구분한다. 카탈로그 컨텍스트와 재고 컨텍스트는 서로 다른 용어를 사용하므로 이 용어를 기준으로 컨텍스트를 분리할 수 있다. 또한 실제로 사용자에게 기능을 제공하는 물리적 시스템으로 도메인 모델은 이 바운디드 컨텍스트 안에서 도메인을 구현한다.

이상적으로 하위 도메인과 바운디드 컨텍스트가 일대일 관계를 가지면 좋겠지만 현실은 그렇지 않을 때가 많다. 이때 주의할 점은 하위 도메인의 모델이 섞이지 않도록 하는 것이다.

이렇게 함으로써 하위 도메인을 위한 모델이 서로 뒤섞이지 않고 하위 도메인마다 바운디드 컨텍스트를 갖는 효과를 낼 수 있다.

![9 3](https://user-images.githubusercontent.com/66859363/209642066-8c856808-b95d-488b-b8dd-6bb2139e78b5.png)

바운디드 컨텍스트는 도메인 모델을 구분하는 경계가 되기 때문에 바운디드 컨텍스트는 구현하는 하위 도메인에 알맞은 모델을 포함한다. 같은 사용자라 하더라도 주문 바운디드 컨텍스트와 회원 바운디드 컨텍스트가 갖는 모델이 달라진다.

![9 4](https://user-images.githubusercontent.com/66859363/209642070-ed95d7db-ad2a-42ee-a3bd-6e9ebf6d42bf.png)

## 9.3 바운디드 컨텍스트 구현

바운디드 컨텍스트가 도메인 모델만 포함하는 것은 아니다. 바운디드 컨텍스트는 도메인 기능을 사용자에게 제공하는 데 필요한 표현 영역, 응용 서비스, 인프라스트럭처 영역을 모두 포함한다.

![9 5](https://user-images.githubusercontent.com/66859363/209642072-e6fdaddf-c1c1-4c01-8c4b-a21dbf9b591b.png)

모든 바운디드 컨텍스트를 반드시 도메인 주도로 개발할 필요는 없다.

예를 들어 상품의 리뷰는 복잡한 도메인 로직을 갖지 않기 때문에 CRUD 방식으로 구현해도 된다.

![9 6](https://user-images.githubusercontent.com/66859363/209642073-f3bfb745-c537-4ec7-9fbd-8da2e849d397.png)

또한 한 바운디드 컨텍스트에서 두 방식을 혼합해서 사용할 수도 있다. 대표적인 예가 `CQRS 패턴(Command Query Responsibility Segregation)`이다.

CQRS 패턴은 상태를 변경하는 명령 기능과 내용을 조회하는 쿼리 기능을 위한 모델을 구분하는 패턴이다.

![9 7](https://user-images.githubusercontent.com/66859363/209642075-bb590eeb-4c1e-4f98-ab4f-863309a2757a.png)
